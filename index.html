<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBCRS </title>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="google_translate_element"></div>
<script>
function googleTranslateElementInit() {
    new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'en,hi',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
        autoDisplay: false // Disable the automatic display of the translation banner
    }, 'google_translate_element');
}
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<div>
    <button id="about"><a href="./about.html" id="a1">About Us</a></button>
</div>
    <div class="container">
        <header>
            <h1 id="heading1">Welcome to NBCRS</h1>
        </header>
        <div class="content">
            <div class="logo-container">
                <img src="Logo.png" alt="Coal India Limited Logo" class="logo">
            </div>
            <div class="login-form">
                <form id="loginForm">
                    <h2>Login</h2>
                    <input type="text" placeholder="Registration ID / Email / Phone" id="identifier" required>
                    <input type="password" placeholder="Password" id="password" required>
                    <div class="g-recaptcha" data-sitekey="6LfEmNMqAAAAAGXl4J0UUCBg6izfYNcwxg4qSxTi"></div>
                    <div class="remember-forgot">
                        <label><input type="checkbox"> Remember me</label>
                        <!-- <a href="#">Forgot password?</a> -->
                    </div>
                    <button type="submit" id="sign">Sign In</button>
                    <button type="submit" id="sign"><a href="./register.html" style="color: black; text-decoration: none;">Register</a></button>
                    <!-- <a href="#" class="help-link">Need assistance? Get Help Here</a> -->
                </form>
                <!-- <div class="app-links">
                    <a href="#"><img src="googleplay.jpeg" alt="Google Play"></a>
                    <a href="#"><img src="appstore.jpeg" alt="App Store"></a>
                </div> -->
            </div>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <!-- <script>
        document.getElementById('loginForm').addEventListener('submit', function (e) {
            e.preventDefault();
    
            // Check if CAPTCHA is completed
            var captchaResponse = grecaptcha.getResponse();
            if (!captchaResponse) {
                alert("Please verify the CAPTCHA before signing in.");
                return false; // Stop form submission completely
            }
    
            const name = document.getElementById('identifier').value;
            const password = document.getElementById('password').value;
    
            // Validate credentials
            db.ref('dataform').orderByChild('name').equalTo(name).once('value', snapshot => {
                if (snapshot.exists()) {
                    snapshot.forEach(childSnapshot => {
                        const user = childSnapshot.val();
                        if (user.pass === password) {
                            // Redirect to page2.html with identifier in URL
                            window.location.href = `page2.html?name=${encodeURIComponent(name)}`;
                        } else {
                            alert('Invalid password.');
                        }
                    });
                } else {
                    alert('User not found.');
                }
            });
        });
    </script>
     
    <script>
const firebaseConfig = {
  apiKey: "AIzaSyBZbkbWTlYtScXenDL9n-CgYSNluFtRf9E",
  authDomain: "dataadd-8cf4f.firebaseapp.com",
  databaseURL: "https://dataadd-8cf4f-default-rtdb.firebaseio.com",
  projectId: "dataadd-8cf4f",
  storageBucket: "dataadd-8cf4f.appspot.com",
  messagingSenderId: "163416489588",
  appId: "1:163416489588:web:d786217186f5e6ebe01b21",
  measurementId: "G-W8YZ1PKF5X"
};

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        document.getElementById('loginForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const name = document.getElementById('identifier').value;
            const password = document.getElementById('password').value;

            // Validate credentials
            db.ref('dataform').orderByChild('name').equalTo(name).once('value', snapshot => {
                if (snapshot.exists()) {
                    snapshot.forEach(childSnapshot => {
                        const user = childSnapshot.val();
                        if (user.pass === password) {
                            // Redirect to page2.html with identifier in URL
                            window.location.href = `page2.html?name=${encodeURIComponent(name)}`;
                        } else {
                            alert('Invalid password.');
                        }
                    });
                } else {
                    alert('User not found.');
                }
            });
        });
    </script> -->
    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBZbkbWTlYtScXenDL9n-CgYSNluFtRf9E",
            authDomain: "dataadd-8cf4f.firebaseapp.com",
            databaseURL: "https://dataadd-8cf4f-default-rtdb.firebaseio.com",
            projectId: "dataadd-8cf4f",
            storageBucket: "dataadd-8cf4f.appspot.com",
            messagingSenderId: "163416489588",
            appId: "1:163416489588:web:d786217186f5e6ebe01b21",
            measurementId: "G-W8YZ1PKF5X"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Function to enable the Sign In button after CAPTCHA is solved
        function enableSignIn() {
            document.getElementById('sign').disabled = false;
        }

        // Form Submission Handler
        document.getElementById('loginForm').addEventListener('submit', function (e) {
            e.preventDefault();

            // Check if CAPTCHA is completed
            var captchaResponse = grecaptcha.getResponse();
            if (!captchaResponse) {
                alert("Please verify the CAPTCHA before signing in.");
                return false;
            }

            const name = document.getElementById('identifier').value;
            const password = document.getElementById('password').value;

            db.ref('dataform').orderByChild('name').equalTo(name).once('value', snapshot => {
                if (snapshot.exists()) {
                    snapshot.forEach(childSnapshot => {
                        const user = childSnapshot.val();
                        if (user.pass === password) {
                            // Redirect to page2.html with identifier in URL
                            window.location.href = `page2.html?name=${encodeURIComponent(name)}`;
                        } else {
                            alert('Invalid password.');
                        }
                    });
                } else {
                    alert('User not found.');
                }
            });
        });
    </script>
</body>
</html>
